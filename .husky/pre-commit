#!/bin/sh

# Exit on any command failure
set -e

echo "ğŸ” Running pre-commit checks..."

# Run lint-staged for formatting and linting
echo "ğŸ“ Checking code formatting and linting..."
npx lint-staged

# Run type checking on staged TypeScript files
echo "ğŸ” Type checking..."
pnpm tsc

# Run tests related to staged files (if any staged files exist)
if git diff --cached --name-only | grep -E '\.(ts|tsx|js|jsx)$' > /dev/null; then
  echo "ğŸ§ª Running tests..."
  pnpm test --run --passWithNoTests
fi

echo "âœ… Pre-commit checks passed!"
